<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="nl-be" lang="nl-be">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
    
<meta name="description" content="Combinant, combined terminal Antwerp">
<title>Treinnetwerk - Combinant</title>

<meta itemprop="name" content="Combinant">
<meta itemprop="description" content="Combinant, combined terminal Antwerp">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Treinnetwerk - Combinant">
<meta name="twitter:description" content="Combinant, combined terminal Antwerp">
<meta name="twitter:site" content="@combinant">
<meta name="twitter:creator" content="@combinant">
<meta name="og:title" content="Treinnetwerk - Combinant">
<meta name="og:description" content="Combinant, combined terminal Antwerp">
<meta name="og:url" content="https://combinant.github.io/">
<meta name="og:site_name" content="Combinant">
<meta name="og:locale" content="nl_BE">
<meta name="og:type" content="website">

    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-indigo.min.css"/>
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="css/ie7.css">
    <![endif]-->
</head>
<body onload="checkFooter();" onresize="checkFooter();">
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--no-desktop-drawer-button">
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
            <span class="mdl-layout-title logo"><span class="combinant-icons-logo"></span></span>
            <div class="mdl-layout-spacer"></div>
            <nav class="mdl-navigation mdl-layout--large-screen-only"><a class="mdl-navigation__link" href="/">Home</a>
                <a class="mdl-navigation__link" href="/bedrijfsinfo">Bedrijfsinfo</a>
                <a class="mdl-navigation__link" href="/treinnetwerk">Treinnetwerk</a>
                <a class="mdl-navigation__link" href="/cetis">Cetis</a>
                <a class="mdl-navigation__link" href="/nieuws">Nieuws</a>
                <a class="mdl-navigation__link" href="/twitter">Twitter</a>
                <a class="mdl-navigation__link" href="/contact">Contact</a>
                <a class="mdl-navigation__link" href="/en/trainnetwork">English</a>
            </nav>
        </div>
    </header>
    <div class="mdl-layout__drawer">
        <span class="mdl-layout-title logo"><span class="combinant-icons-logo"></span></span>
        <nav class="mdl-navigation"><a class="mdl-navigation__link" href="/">Home</a>
            <a class="mdl-navigation__link" href="/bedrijfsinfo">Bedrijfsinfo</a>
            <a class="mdl-navigation__link" href="/treinnetwerk">Treinnetwerk</a>
            <a class="mdl-navigation__link" href="/cetis">Cetis</a>
            <a class="mdl-navigation__link" href="/nieuws">Nieuws</a>
            <a class="mdl-navigation__link" href="/twitter">Twitter</a>
            <a class="mdl-navigation__link mdl-menu__item--full-bleed-divider" href="/contact">Contact</a>
            <a class="mdl-navigation__link mdl-menu__item--full-bleed-divider" href="/en/trainnetwork">English</a>
            <a class="mdl-navigation__link" href="/privacy-en-voorwaarden">Privacy &amp; voorwaarden</a>
        </nav>
    </div>
    <main id="layoutMain" class="mdl-layout__content">
        <div class="page-content">
<div class="mdl-grid" style="position: relative">
    <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
    <div class="mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--8-col">
        <div id="map" style="width: 100%; height: 720px;"></div>
        <p>De informatie die via deze pagina wordt aangeboden, kan onvolkomenheden van allerlei aard bevatten. "Combinant" staat niet in voor de geschiktheid, betrouwbaarheid, tijdigheid of nauwkeurigheid van de informatie. De informatie wordt geleverd en weergegeven zonder enige vorm van garantie. U dient steeds de operator ter zake te raadplegen. De website van de operator vindt u in de kolom "Operator".</p>
    </div>
</div>
<script>
    var mapUrl = "http://combinant-trainnetwork-api.devgem.be/api/Map";

    var redIcon = 'http://maps.google.com/mapfiles/ms/icons/red-dot.png';
    var purpleIcon = 'http://maps.google.com/mapfiles/ms/icons/purple-dot.png';
    var blueIcon = 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png';

    var map;
    var routes;
    var operators;

    var combinantPosition = { lat: 51.37123953903346, lng: 4.288451224565506 };
    var markers = [];

    var currentInfoWindow = null;

    
    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: combinantPosition
        });
        setTimeout(loadTrainnetwork, 0);
    }

    
    function loadTrainnetwork() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var data = JSON.parse(this.responseText);
                routes = data.routes;
                operators = data.operators;
                setTimeout(showTrainnetwork, 0);
            }
        };
        xhttp.open("GET", mapUrl, true);
        xhttp.send();
    }

    
    function showTrainnetwork() {
        var combinantMarker = new google.maps.Marker({
            position: combinantPosition,
            map: map,
            icon: redIcon
        });
        combinantMarker.addListener('click', _ => {
            if (currentInfoWindow !== null) {
                currentInfoWindow.close();
            }
            var infowindow = new google.maps.InfoWindow({
                content: '<b>Combinant</b>'
            });
            infowindow.open(map, combinantMarker);
            currentInfoWindow = infowindow;
        })

        var markers = [];
        markers.push(combinantMarker);

        var bounds = {
            north: combinantPosition.lat,
            east: combinantPosition.lng,
            south: combinantPosition.lat,
            west: combinantPosition.lng
        };

        var lines = [];
        routes.forEach(function (route) {
            var marker = new google.maps.Marker({
                position: {
                    lat: route.terminal.coordinates.latitude,
                    lng: route.terminal.coordinates.longitude
                },
                map: map,
                icon: getIcon(route)
            });
            marker.addListener('click', _ => {
                if (currentInfoWindow !== null) {
                    currentInfoWindow.close();
                }
                var infowindow = new google.maps.InfoWindow({
                    content: getInfoWindowContent(route)
                });
                infowindow.open(map, marker);
                currentInfoWindow = infowindow;
            })
            markers.push(marker);
            if (route.terminal.coordinates.latitude < bounds.north) {
                bounds.north = route.terminal.coordinates.latitude;
            }
            if (route.terminal.coordinates.latitude > bounds.south) {
                bounds.south = route.terminal.coordinates.latitude;
            }
            if (route.terminal.coordinates.longitude < bounds.west) {
                bounds.west = route.terminal.coordinates.longitude;
            }
            if (route.terminal.coordinates.longitude > bounds.east) {
                bounds.east = route.terminal.coordinates.longitude;
            }
            pushLines(lines, route);
        },
            this);

        drawLines(lines);
        map.fitBounds(bounds);
    }

    function getInfoWindowContent(route) {
        var content = `<b>${route.terminal.name}</b><br/>`;
        route.timings.forEach(timing => {
            content += "<div><hr/>";

            
            content += "<span>Operator ";
            if (hasOperatorUrl(timing)) {
                content += `<a target="_blank" href="${getOperatorUrl(timing)}">`;
            }
            content += `<b>${getOperatorName(timing)}</b>`;
            if (hasOperatorUrl(timing)) {
                content += "</a>";
            }
            content += "</span>";

            //timingdata to
            if (hasTimingData(timing.timingDataTo)) {
                content += "<pre>"
                content += getFormattedTimingData("<b>from</b> Combinant <b>to</b> " + route.terminal.name + ':', timing.timingDataTo, 'departure')
                content += "</pre>"
            }

            
            if (hasTimingData(timing.timingDataFrom)) {
                content += "<pre>"
                content += getFormattedTimingData("<b>from</b> " + route.terminal.name + " <b>to</b> Combinant:", timing.timingDataFrom, '  arrival')
                content += "</pre>"
            }

            content += "</div>";
        });
        return content;
    }

    
    function getIcon(route) {
        return route.isDirectRoute ? blueIcon : purpleIcon;
    }

    
    function drawLines(lines) {
        lines.forEach(line => line.setMap(map));
    }

    
    function pushLines(lines, route) {
        if (route.isDirectRoute) {
            lines.push(
                new google.maps.Polyline({
                    path: [
                        combinantPosition,
                        {
                            lat: route.terminal.coordinates.latitude,
                            lng: route.terminal.coordinates.longitude
                        }
                    ],
                    geodesic: false,
                    strokeColor: "#FF0000",
                    strokeOpacity: 1.0,
                    strokeWeight: 1.5
                })
            );
        }
        if (route.viaIds !== null && route.viaIds.length > 0) {
            var toCoordinates = route.terminal.coordinates;
            route.viaIds.forEach(viaId => {
                var fromCoordinates = routes.find(r => r.id === viaId).terminal.coordinates;
                lines.push(
                    new google.maps.Polyline({
                        path: [
                            {
                                lat: fromCoordinates.latitude,
                                lng: fromCoordinates.longitude
                            },
                            {
                                lat: toCoordinates.latitude,
                                lng: toCoordinates.longitude
                            }
                        ],
                        geodesic: false,
                        strokeColor: "#0000FF",
                        strokeOpacity: 1.0,
                        strokeWeight: 1.5
                    })
                );
            });
        }
    }

    
    function getOperator(operatorId) {
        var operator = operators.find(o => o.id === operatorId);
        if (operator) {
            return operator;
        } else {
            return null;
        }
    }

    
    function hasOperatorUrl(timing) {
        return getOperatorUrl(timing) !== null;
    }

    
    function getOperatorUrl(timing) {
        var operator = getOperator(timing.operatorId);
        if (operator) {
            var url = operator.url;
            if (url && url.trim() !== '') {
                return url;
            } else {
                return null;
            }
        } else {
            return null;
        }
    }

    
    function getOperatorName(timing) {
        const operator = getOperator(timing.operatorId);
        if (operator) {
            return operator.name;
        } else {
            return null;
        }
    }

    function hasTimingData(timingData) {
        if ((timingData.departure === null || timingData.departure.trim() === '')
            && (timingData.closing === null || timingData.closing.trim() === '')
            && (timingData.pickup === null || timingData.pickup.trim() === '')
            && (timingData.profile === null || timingData.profile.trim() === '')) {
            return false;
        }

        return timingData !== null
            && (timingData.departure !== null
                || timingData.closing !== null
                || timingData.pickup !== null
                || timingData.profile !== null);
    }

    function getFormattedTimingData(prefix, timingData, daysWording) {
        var formatted = `${prefix}\n`;
        if (timingData.departure !== null && timingData.departure.trim() !== '') {
            formatted += ` <b>${daysWording}</b> ${timingData.departure}\n`;
        }
        if (timingData.closing !== null && timingData.closing.trim() !== '') {
            formatted += `   <b>closing</b> ${timingData.closing}\n`;
        }
        if (timingData.pickup !== null && timingData.pickup.trim() !== '') {
            formatted += `    <b>pickup</b> ${timingData.pickup}\n`;
        }
        if (timingData.profile !== null && timingData.profile.trim() !== '') {
            formatted += `   <b>profile</b> ${timingData.profile}`;
        }
        return formatted;
    }

</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCI-TrT5xbpbakJqRM2i34WtNSq9RrTHFY&callback=initMap">

</script>
<footer id="layoutFooter" class="mdl-mini-footer" style="visibility: hidden;">
    <div class="mdl-mini-footer__left-section">
        <div class="mdl-logo mdl-layout--large-screen-only footer-logo"><span class="combinant-icons-logo"></span></div>
        <ul class="mdl-mini-footer__link-list">
            <li>&copy; 2008 - <span id="currentYear"></span></li>
            <script>
                currentYear.innerHTML = new Date().getFullYear();
            </script>
            <li><a href="/privacy-en-voorwaarden">Privacy &amp; voorwaarden</a></li>
        </ul>
    </div>
    <div id="layoutFooterRight" class="mdl-mini-footer__right-section">
        <ul class="mdl-mini-footer__link-list">
            <li>+32 3 250 62 62</li>
            <li><a href="mailto:info@combinant.be">info@combinant.be</a></li>
        </ul>
    </div>
</footer></div>
    </main>
</div>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
<![endif]-->
<!--[if IE]>
<script src="//cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.7/es5-shim.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/classlist/2014.01.31/classList.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/flexie/1.0.3/flexie.min.js"></script>
<![endif]-->
<!--[if lt IE 8]>
<script src="/ie7/ie7.js"></script>
<![endif]--><script>
    function checkFooter() {
        setTimeout(function() {
            if (layoutMain.scrollHeight <= layoutMain.clientHeight) {
                layoutFooter.style.bottom = 0;
                layoutFooter.style.position = "absolute";
                layoutFooter.style.width = "100%";
                layoutFooterRight.style.paddingRight = "16px";
            }
            layoutFooter.style.visibility = "visible";
        }, 0);
    };
</script></body>
</html>